#!/bin/python

import sys

def make_connections(road_list, connected_list):
    cities = [connected_list[0][0], connected_list[0][1]]
    for road in road_list:
        print road
        for city in cities:
            if(city in road):
                if(city == road[0]):
                    cities.append(road[1])
                else:
                    cities.append(road[0])
                connected_list.append(road)
                road_list.remove(road)
                break
    connected_list.append(cities)
    return connected_list

q = int(raw_input().strip())
for a0 in xrange(q):
    n, m, x, y = raw_input().strip().split(' ')
    n, m, x, y = [int(n), int(m), long(x), long(y)]
    input_list = []
    if(x <= y):
        print n*x;
    else:
        for a1 in xrange(m):
            road = map(int,raw_input().strip().split(' '))
            input_list.append(road)
        open_list = []
        while(len(input_list) > 0):            
            connected_ones = [input_list[0]]
            input_list.pop(0)
            if(len(input_list) < 1):
                break
            connected_ones = make_connections(input_list, connected_ones)
            open_list.append(connected_ones)
        total_sum = 0        
        for connections in connected_ones:
            connections.pop()
            cities = list(set(connections)
            cost = (len(cities) - 1) * y + x
            total_sum = total_sum + cost
        print total_sum    
